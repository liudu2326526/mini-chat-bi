# 极简 Chat BI - 产品需求文档 (MVP 版本)

## 1. 产品概述 (Overview)
**产品名称**：Mini Chat BI (暂定)
**产品定位**：一款面向非技术人员的极简数据分析工具。用户只需上传数据文件，通过自然语言提问，即可获得可视化的数据洞察。
**核心价值**：降低数据分析门槛，让“提问”直接变成“图表”。

## 2. 用户画像 (User Persona)
*   **目标用户**：运营人员、产品经理、小微企业主。
*   **痛点**：手里有 Excel 表格，想看趋势或对比，但不会写 SQL，也不会用复杂的 BI 软件，做图表太耗时。

## 3. 核心功能需求 (Functional Requirements)

### 3.1 数据源管理 (Data Source)
*   **文件上传**：支持 CSV、Excel (.xlsx) 格式文件上传。
*   **数据预览**：上传成功后，展示前 5-10 行数据，供用户确认表头（字段名）是否正确。
*   **限制**：MVP 版本仅支持单文件分析，不支持多表关联。

### 3.2 对话交互 (Chat Interface)
*   **自然语言提问**：用户输入如“上个月销售额最高的地区是哪里？”、“按周统计用户增长趋势”。
*   **智能联想 (可选)**：根据上传的表头，提供 3-5 个预置的推荐问题（例如：“统计 [字段A] 的分布情况”）。
*   **上下文理解**：支持简单的多轮对话（例如：先问“北京的销售额”，再问“那上海的呢？”）。

### 3.3 数据可视化与输出 (Visualization)
*   **自动图表推荐**：系统根据数据类型自动选择展示方式：
    *   **数值概览**：直接回答数字（如：总销售额是 500万）。
    *   **趋势图 (Line)**：涉及时间序列的数据。
    *   **柱状图 (Bar)**：涉及分类对比的数据。
    *   **饼图 (Pie)**：涉及占比分布的数据。
    *   **表格 (Table)**：展示明细数据。
*   **解释性文本**：在图表下方附带一句话的分析总结（如：“可见 3 月份达到了峰值”）。

## 4. 交互逻辑与页面流 (Interaction Logic)

### 4.1 页面结构
采用单页面应用（SPA）设计，分为两个主要区域：
1.  **左侧/顶部设置区**：数据上传与状态显示。
2.  **主体对话区**：聊天气泡流。

### 4.2 详细交互流程

#### 阶段一：初始状态 (Empty State)
*   **界面**：对话区为空，屏幕中央显示一个明显的“上传数据”卡片。
*   **动作**：用户点击或拖拽文件到区域内。
*   **反馈**：
    *   上传中：显示进度条。
    *   上传成功：显示“数据已就绪，包含字段：[日期, 销售额, 城市...]”，并在对话区底部激活输入框。
    *   上传失败：提示格式错误或文件过大。

#### 阶段二：提问与处理 (Querying)
*   **动作**：用户在底部输入框输入问题，回车发送。
*   **状态 - 处理中**：
    *   用户气泡上屏。
    *   系统显示“正在思考...”或“正在分析数据...”的动态效果（Loading）。
    *   *设计细节*：处理时间若超过 2 秒，需显示进度提示（如“正在生成 SQL...”、“正在绘图...”），缓解用户焦虑。

#### 阶段三：结果展示 (Result Display)
*   **成功情况**：
    *   系统气泡弹出。
    *   优先展示图表/卡片。
    *   图表支持简单的交互（鼠标悬停显示具体数值）。
    *   提供“下载图片”或“下载表格”的小按钮。
*   **失败/澄清情况**：
    *   如果系统没听懂，回复：“抱歉，我没太理解。你是想问关于 [字段A] 还是 [字段B] 的数据？”
    *   如果数据里查不到，回复：“当前数据表中似乎没有关于‘XXX’的信息。”

#### 阶段四：上下文与重置
*   **清空上下文**：在输入框旁提供一个“清除/新对话”按钮，点击后清空历史记录，相当于开始新的分析。
*   **数据切换**：提供“替换数据文件”的入口。

## 5. 边界情况 (Edge Cases)
1.  **字段名含糊**：如果表头是 "col1", "col2"，系统应提示用户修改表头，或者在回答时尝试推断但标注不确定性。
2.  **数据量过大**：前端限制上传文件大小（如 10MB 以内），防止浏览器崩溃。
3.  **敏感词/无关闲聊**：如果用户问“今天天气怎么样”，系统应回复：“我只是一个数据分析助手，请问我关于数据的问题。”

## 6. 非功能性需求 (Non-Functional)
*   **响应速度**：简单查询应在 5 秒内返回结果。
*   **易用性**：无需任何配置，打开即用。
*   **隐私**：MVP 版本数据尽量在本地处理，或传输过程加密，不在服务端持久化存储用户数据（用完即焚）。
